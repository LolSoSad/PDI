<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ข้อมูลรายการแมชชิ่งกล่องและรถยก</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

  
  <style>
:root{
      --primary:#1f6fb2;       /* ฟ้า */
      --accent:#ff7a1a;        /* ส้ม */
      --bg:#f5f7fb;
      --card:#ffffff;
      --border:#e6edf7;
      --text:#0f172a;
      --muted:#64748b;

      --radius:18px;
      --shadow:0 14px 30px rgba(15,23,42,.08);

      /* soft surfaces */
      --blue-soft:#eaf2fb;
      --orange-soft:#fff1e6;

      /* status */
      --ok-bg:rgba(31,111,178,.14);
      --ok-bd:rgba(31,111,178,.35);
      --ok-tx:#155b96;

      --wait-bg:rgba(255,122,26,.14);
      --wait-bd:rgba(255,122,26,.40);
      --wait-tx:#b84a00;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans Thai", Arial;
      background: var(--bg);   /* ✅ no gradient */
      color:var(--text);
    }

    .page{
      max-width: 1200px;
      margin: 22px auto;
      padding: 0 14px;
    }

    .panel{
      background: var(--card); /* ✅ no gradient */
      border: 1px solid rgba(230,237,247,.95);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .panel-head{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      padding: 16px 18px 14px;
      border-bottom: 1px solid var(--border);
      background: #ffffff;      /* ✅ no gradient */
    }

    .title{
      display:flex; gap:10px; align-items:center;
    }
    .title .badge-dot{
      width: 40px; height: 40px;
      border-radius: 14px;
      display:grid; place-items:center;
      background: var(--blue-soft); /* ✅ no gradient */
      border: 1px solid rgba(31,111,178,.22);
      color: var(--primary);
    }
    .title h1{
      margin:0;
      font-size: 18px;
      font-weight: 800;
      letter-spacing: .2px;
    }
    .title p{
      margin:3px 0 0;
      font-size: 12px;
      color: var(--muted);
    }

    .tools{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .search{
      position:relative;
      min-width: 260px;
      max-width: 360px;
      flex:1;
    }
    .search input{
      width:100%;
      padding: 10px 12px 10px 36px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fff;         /* ✅ flat */
      outline:none;
      transition:.15s;
      font-size: 13px;
    }
    .search input:focus{
      border-color: rgba(31,111,178,.55);
      box-shadow: 0 0 0 4px rgba(31,111,178,.12);
    }
    .search i{
      position:absolute;
      left: 12px; top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
      font-size: 14px;
    }

    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 9px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #fff;         /* ✅ flat */
      font-size: 12px;
      color: var(--muted);
      white-space:nowrap;
    }
    .chip b{color:var(--text)}
    .chip .dot{
      width:10px; height:10px; border-radius:999px;
      background: var(--accent);
      box-shadow: 0 0 0 3px rgba(255,122,26,.18);
    }

    /* table */
    .table-wrap{ padding: 12px 12px 16px; }

    table{
      width:100%;
      border-collapse: separate;
      border-spacing: 0;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow:hidden;
    }

    thead th{
      position: sticky;
      top: 0;
      z-index: 1;
      background: var(--blue-soft); /* ✅ no gradient */
      color: #0b1b2f;
      font-size: 12px;
      text-align:left;
      padding: 12px 12px;
      border-bottom: 1px solid var(--border);
      font-weight: 800;
    }

    tbody td{
      padding: 12px 12px;
      border-bottom: 1px solid rgba(230,237,247,.8);
      vertical-align: middle;
      font-size: 13px;
    }

    tbody tr{
      transition: .15s;
    }
    tbody tr:hover{
      background: rgba(31,111,178,.05); /* ✅ no gradient */
    }

    .col-no{ width: 56px; color: var(--muted); text-align:center; }
    .col-action{ width: 230px; }
    .col-ยืนยัน{ width: 120px; text-align:center; }

    .link-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(31,111,178,.28);
      background: var(--blue-soft);
      color: #0e4f86;
      font-weight: 800;
      text-decoration:none;
    }
    .link-pill i{ font-size: 14px; }

    .sn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,122,26,.32);
      background: var(--orange-soft);
      color: #a54300;
      font-weight: 800;
      font-size: 12px;
    }

    .status{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      font-weight: 800;
      font-size: 12px;
      border: 1px solid transparent;
      white-space:nowrap;
    }
    .status.ok{ background: var(--ok-bg); border-color: var(--ok-bd); color: var(--ok-tx); }
    .status.wait{ background: var(--wait-bg); border-color: var(--wait-bd); color: var(--wait-tx); }
    .status .dot{
      width:8px; height:8px; border-radius:999px;
      background: currentColor;
      opacity:.9;
    }

    .btns{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-start;
    }
    .btn{
      border:none;
      border-radius: 12px;
      padding: 9px 10px;
      font-weight: 800;
      font-size: 12px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      transition:.15s;
      text-decoration:none;
      user-select:none;
    }
    .btn-primary{
      background: var(--primary); /* ✅ no gradient */
      color:#fff;
      box-shadow: none;
    }
    .btn-primary:hover{ filter: brightness(1.03); transform: translateY(-1px); }

    .btn-accent{
      background: var(--accent);  /* ✅ no gradient */
      color:#fff;
      box-shadow: none;
    }
    .btn-accent:hover{ filter: brightness(1.03); transform: translateY(-1px); }

    .btn-ghost{
      background: rgba(15,23,42,.04);
      border: 1px solid rgba(15,23,42,.10);
      color: #0f172a;
    }
    .btn-ghost:hover{
      background: rgba(15,23,42,.06);
      transform: translateY(-1px);
    }

    .btn-ยืนยัน{
      background: rgba(16,185,129,.14);
      color: #047857;
      border: 1px solid rgba(16,185,129,.35);
      padding: 9px 14px;
      border-radius: 999px;
      font-weight: 900;
    }
    .btn-ยืนยัน:hover{
      background: rgba(16,185,129,.18);
      transform: translateY(-1px);
    }

    /* Mobile: table -> card list */
    @media (max-width: 860px){
      .panel-head{
        flex-direction: column;
        align-items: stretch;
      }
      .tools{ justify-content:flex-start; }
      .search{ min-width: 100%; max-width: 100%; }

      table, thead, tbody, th, td, tr{ display:block; }
      thead{ display:none; }

      table{
        border-radius: 16px;
        border: none;
        background: transparent;
      }
      tbody tr{
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 16px;
        box-shadow: 0 10px 18px rgba(15,23,42,.06);
        margin-bottom: 12px;
        overflow:hidden;
      }
      tbody td{
        border-bottom: 1px dashed rgba(230,237,247,.9);
        padding: 10px 12px;
      }
      tbody td:last-child{ border-bottom:none; }

      td[data-label]{
        display:flex;
        gap:10px;
        align-items:flex-start;
      }
      td[data-label]::before{
        content: attr(data-label);
        min-width: 120px;
        color: var(--muted);
        font-weight: 800;
        font-size: 12px;
      }

      .col-no, .col-ยืนยัน{ text-align:left; width:auto; }
      .btns{ justify-content:flex-start; }
    }

    /* Modal: กรอกชื่อช่างผู้ประกอบ */
    .modal-backdrop{
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,.45);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 9999;
    }
    .modal-backdrop.show{ display:flex; }

    .modal-card{
      width: min(520px, 100%);
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: 0 20px 45px rgba(15,23,42,.18);
      overflow: hidden;
    }
    .modal-head{
      padding: 14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border-bottom: 1px solid var(--border);
      background: #fff;
    }
    .modal-title{
      display:flex; align-items:center; gap:10px;
      font-weight: 900;
    }
    .modal-title .ic{
      width: 36px; height: 36px;
      display:grid; place-items:center;
      border-radius: 12px;
      background: var(--blue-soft);
      border: 1px solid rgba(31,111,178,.22);
      color: var(--primary);
    }
    .modal-close{
      border:none;
      background: rgba(15,23,42,.06);
      border: 1px solid rgba(15,23,42,.10);
      border-radius: 10px;
      padding: 8px 10px;
      cursor:pointer;
      font-weight: 900;
    }
    .modal-body{ padding: 14px 16px 6px; }
    .form-label{
      font-size: 12px;
      color: var(--muted);
      font-weight: 800;
      margin-bottom: 6px;
      display:block;
    }
    .form-input{
      width: 100%;
      padding: 11px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      outline: none;
      font-size: 13px;
    }
    .form-input:focus{
      border-color: rgba(31,111,178,.55);
      box-shadow: 0 0 0 4px rgba(31,111,178,.12);
    }
    .help{
      margin: 8px 0 0;
      font-size: 12px;
      color: var(--muted);
    }
    .error{
      display:none;
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(255,122,26,.12);
      border: 1px solid rgba(255,122,26,.35);
      color: #b84a00;
      font-weight: 800;
      font-size: 12px;
    }
    .error.show{ display:block; }

    .modal-foot{
      padding: 12px 16px 16px;
      display:flex;
      gap:10px;
      justify-content:flex-end;
    }

    /* pill for assembler */
    .assembler-pill{
      background: rgba(31,111,178,.10);
      border-color: rgba(31,111,178,.25);
      color: #0e4f86;
    }

  </style>

</head>

<body>
  <div class="page">
    <div class="panel">
      <div class="panel-head">
        <div class="title">
          <div class="badge-dot"><i class="bi bi-link-45deg"></i></div>
          <div>
            <h1>ข้อมูลรายการแมชชิ่งกล่องและรถยก</h1>
          </div>
        </div>

        <div class="tools">
          <div class="search">
            <i class="bi bi-search"></i>
            <input type="text" placeholder="ค้นหา: เลขรถยก / serial / รหัส..." />
          </div>
          <div class="chip"><span class="dot"></span> <b>รวม</b> 17 รายการ</div>
        </div>
      </div>

      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th class="col-no">ลำดับ</th>
              <th>เลขรถยก</th>
              <th>⇄</th>
              <th>ซีเรียลกล่อง</th>
              <th>ช่างผู้ประกอบ</th>
              <th>ข้อมูลประกอบ</th>
              <th class="col-ยืนยัน">ยืนยัน</th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td class="col-no" data-label="ลำดับ">1</td>
              <td data-label="เลขรถยก">
                <a class="link-pill" href="#">
                  <i class="bi bi-truck"></i> LPE (LPE200) - 0007
                </a>
              </td>
              <td data-label="เชื่อม">
                <span class="status ok"><span class="dot"></span> จับคู่แล้ว</span>
              </td>
              <td data-label="ซีเรียลกล่อง">
                <span class="sn"><i class="bi bi-cpu"></i> 2510032</span>
              </td>
              <td data-label="ช่างผู้ประกอบ">
                <span class="sn assembler-pill"><i class="bi bi-person-check"></i> -</span>
              </td>
              <td data-label="รายละเอียด">
                <div class="btns">
                  <a class="btn btn-primary" href="#"><i class="bi bi-wrench-adjustable"></i> รายละเอียดการประกอบ</a>
                  <a class="btn btn-ghost" href="#"><i class="bi bi-clipboard-check"></i> รายละเอียด QC</a>
                </div>
              </td>
              <td class="col-ยืนยัน" data-label="ยืนยัน">
                <button class="btn btn-ยืนยัน"><i class="bi bi-check2-circle"></i> ยืนยัน</button>
              </td>
            </tr>

            <tr>
              <td class="col-no" data-label="ลำดับ">2</td>
              <td data-label="เลขรถยก">
                <a class="link-pill" href="#">
                  <i class="bi bi-truck"></i> LPE (test0005) - 0003
                </a>
              </td>
              <td data-label="เชื่อม">
                <span class="status wait"><span class="dot"></span> รอยืนยัน</span>
              </td>
              <td data-label="ซีเรียลกล่อง">
                <span class="sn"><i class="bi bi-cpu"></i> -</span>
              </td>
              <td data-label="ช่างผู้ประกอบ">
                <span class="sn assembler-pill"><i class="bi bi-person-check"></i> -</span>
              </td>
              <td data-label="รายละเอียด">
                <div class="btns">
                  <span style="color:var(--muted);font-weight:700;">-</span>
                </div>
              </td>
              <td class="col-ยืนยัน" data-label="ยืนยัน">
                <button class="btn btn-ยืนยัน"><i class="bi bi-check2-circle"></i> ยืนยัน</button>
              </td>
            </tr>

            <tr>
              <td class="col-no" data-label="ลำดับ">3</td>
              <td data-label="เลขรถยก">
                <a class="link-pill" href="#">
                  <i class="bi bi-truck"></i> LHE (LHE150) - 2010018299
                </a>
              </td>
              <td data-label="เชื่อม">
                <span class="status ok"><span class="dot"></span> จับคู่แล้ว</span>
              </td>
              <td data-label="ซีเรียลกล่อง">
                <span class="sn"><i class="bi bi-cpu"></i> 222228</span>
              </td>
              <td data-label="ช่างผู้ประกอบ">
                <span class="sn assembler-pill"><i class="bi bi-person-check"></i> -</span>
              </td>
              <td data-label="รายละเอียด">
                <div class="btns">
                  <a class="btn btn-primary" href="#"><i class="bi bi-wrench-adjustable"></i> รายละเอียดการประกอบ</a>
                </div>
              </td>
              <td class="col-ยืนยัน" data-label="ยืนยัน">
                <button class="btn btn-ยืนยัน"><i class="bi bi-check2-circle"></i> ยืนยัน</button>
              </td>
            </tr>

          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Modal: กรอกชื่อช่างผู้ประกอบ -->
  <div class="modal-backdrop" id="assemblerModal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="assemblerTitle">
      <div class="modal-head">
        <div class="modal-title" id="assemblerTitle">
          <span class="ic"><i class="bi bi-person-check"></i></span>
          <span>ยืนยันงานประกอบ</span>
        </div>
        <button class="modal-close" type="button" id="assemblerClose"><i class="bi bi-x-lg"></i></button>
      </div>
      <div class="modal-body">
        <label class="form-label">ชื่อช่างผู้ประกอบ</label>
        <input class="form-input" id="assemblerName" type="text" placeholder="เช่น สมชาย ใจดี" />
        <p class="help">เมื่อกด “บันทึกและยืนยัน” ระบบจะแสดงชื่อช่างผู้ประกอบในตาราง</p>
        <div class="error" id="assemblerError">กรุณากรอกชื่อช่างผู้ประกอบ</div>
      </div>
      <div class="modal-foot">
        <button class="btn btn-ghost" type="button" id="assemblerCancel"><i class="bi bi-x-circle"></i> ยกเลิก</button>
        <button class="btn btn-primary" type="button" id="assemblerSave"><i class="bi bi-check2-circle"></i> บันทึกและยืนยัน</button>
      </div>
    </div>
  </div>


  <script>
    (function(){
      const modal = document.getElementById('assemblerModal');
      const input = document.getElementById('assemblerName');
      const err = document.getElementById('assemblerError');
      const btnClose = document.getElementById('assemblerClose');
      const btnCancel = document.getElementById('assemblerCancel');
      const btnSave = document.getElementById('assemblerSave');

      let activeRow = null; // <tr>

      function openModal(row){
        activeRow = row;
        err.classList.remove('show');
        input.value = '';
        modal.classList.add('show');
        modal.setAttribute('aria-hidden', 'false');
        setTimeout(()=>input.focus(), 50);
      }

      function closeModal(){
        modal.classList.remove('show');
        modal.setAttribute('aria-hidden', 'true');
        activeRow = null;
      }

      function setAssemblerName(name){
        if(!activeRow) return;

        const cell = activeRow.querySelector('td[data-label="ช่างผู้ประกอบ"]');
        if(cell){
          cell.innerHTML = '<span class="sn assembler-pill"><i class="bi bi-person-check"></i> ' + escapeHtml(name) + '</span>';
        }
      }

      function escapeHtml(str){
        return String(str)
          .replaceAll('&','&amp;')
          .replaceAll('<','&lt;')
          .replaceAll('>','&gt;')
          .replaceAll('"','&quot;')
          .replaceAll("'","&#039;");
      }

      // bind confirm buttons
      document.querySelectorAll('.btn-ยืนยัน').forEach(btn=>{
        btn.addEventListener('click', function(e){
          e.preventDefault();
          const row = this.closest('tr');
          openModal(row);
        });
      });

      // close actions
      btnClose.addEventListener('click', closeModal);
      btnCancel.addEventListener('click', closeModal);
      modal.addEventListener('click', (e)=>{ if(e.target === modal) closeModal(); });

      // save
      btnSave.addEventListener('click', ()=>{
        const name = (input.value || '').trim();
        if(!name){
          err.classList.add('show');
          input.focus();
          return;
        }
        setAssemblerName(name);
        closeModal();
      });

      // enter key
      input.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter'){
          e.preventDefault();
          btnSave.click();
        }
        if(e.key === 'Escape'){
          e.preventDefault();
          closeModal();
        }
      });

      document.addEventListener('keydown', (e)=>{
        if(e.key === 'Escape' && modal.classList.contains('show')){
          closeModal();
        }
      });
    })();
  </script>

</body>
</html>
